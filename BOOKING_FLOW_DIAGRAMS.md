# Booking System - Visual Flow Diagrams\n\n## 1. Overall Architecture\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                     BOOKING SYSTEM v2.0                         â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚                                                                 â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚\nâ”‚  â”‚              Service Selection (/services)               â”‚  â”‚\nâ”‚  â”‚                                                          â”‚  â”‚\nâ”‚  â”‚  [Browse Services] â†’ [Add to Cart] â†’ [Go to /booking]   â”‚  â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚\nâ”‚                            â†“                                    â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚\nâ”‚  â”‚            /booking - Main Booking Page                 â”‚  â”‚\nâ”‚  â”‚                                                          â”‚  â”‚\nâ”‚  â”‚  [Service Cart] â† Select Specialist (PER SERVICE)        â”‚  â”‚\nâ”‚  â”‚  [Customer Info] â† Name, Email, Phone                   â”‚  â”‚\nâ”‚  â”‚  [Schedule] â† Date, Time Selection                      â”‚  â”‚\nâ”‚  â”‚  [Payment] â† Choose Method (Cash/Wallet/Mixed)         â”‚  â”‚\nâ”‚  â”‚  [Checkout] â† Confirm Button (Smart Logic)             â”‚  â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚\nâ”‚                            â†“                                    â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚\nâ”‚  â”‚              Firebase (bookings collection)              â”‚  â”‚\nâ”‚  â”‚                                                          â”‚  â”‚\nâ”‚  â”‚  [Guest Booking] ID: GUEST-{ts}-{rand}                  â”‚  â”‚\nâ”‚  â”‚  [User Booking]  ID: bk_{uuid}                          â”‚  â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚\nâ”‚                            â†“                                    â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚\nâ”‚  â”‚         Redirect: Guest â†’ / | User â†’ /portal            â”‚  â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚\nâ”‚                                                                 â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n---\n\n## 2. Payment Method Decision Tree\n\n```\n                          START BOOKING\n                               â†“\n                    [Select Payment Method]\n                               â†“\n                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                â†“              â†“              â†“              â†“\n           CASH ğŸ’°        WALLET ğŸ¦       MIXED ğŸ’³       NONE â“\n                â”‚              â”‚              â”‚              â”‚\n                â†“              â†“              â†“              â†“\n            NO LOGIN       LOGIN REQ?    LOGIN REQ?       ERROR\n                â”‚              â”‚              â”‚\n                â”‚              â”œâ”€â†’ NO LOGIN   â”‚\n                â”‚              â”‚   âŒ SHOW    â”‚\n                â”‚              â”‚   ALERT      â”‚\n                â”‚              â”‚   ğŸ”’ BUTTON  â”‚\n                â”‚              â”‚   DISABLED   â”‚\n                â”‚              â”‚              â”‚\n                â”‚              â””â”€â†’ LOGGED IN  â””â”€â†’ LOGGED IN\n                â”‚                 âœ… OK           âœ… OK\n                â”‚                 âœ… PROCEED      âœ… PROCEED\n                â”‚                                   â”‚\n                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                            â†“\n                    [Fill Required Fields]\n                            â†“\n                    [Assign Specialist]\n                    (per service)\n                            â†“\n                    [Confirm Button]\n                      Smart Logic\n                            â†“\n                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                â”‚   ALL VALID? & READY? â”‚\n                â”‚   YES â†’ ENABLED âœ…    â”‚\n                â”‚   NO  â†’ DISABLED ğŸ”´   â”‚\n                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n---\n\n## 3. Guest Checkout Flow (Cash)\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚              GUEST CHECKOUT - CASH FLOW                     â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\n[Start] â†’ Not Logged In\n   â†“\n[Add Services]\n   â†“\n[Go to /booking]\n   â†“\n[Fill Customer Info]\n  â€¢ Name (required)\n  â€¢ Email (required)\n  â€¢ Phone (required)\n   â†“\n[Select Specialist]\n  Per service (required)\n   â†“\n[Select Date & Time]\n  â€¢ Date (required)\n  â€¢ Time (required)\n   â†“\n[Choose Payment]\n  âšª CASH ON DELIVERY â† SELECT THIS\n   â†“\n[Alert Box?] âŒ NO (only for wallet/mixed)\n   â†“\n[Confirm Button?] âœ… ENABLED\n   â†“\n[Click CONFIRM BOOKING]\n   â†“\n[Generate Booking ID]\n  GUEST-1704067200000-x7k9m2p\n   â†“\n[Calculate Final Amount]\n  finalAmount = cartTotal - couponDiscount\n   â†“\n[Save to Firebase]\n  {\n    bookingId: \"GUEST-...\",\n    customerId: \"guest\",\n    paymentMethod: \"cash\",\n    finalAmount: 100,\n    status: \"pending\"\n  }\n   â†“\n[Show Confirmation]\n  \"Your booking is confirmed!\"\n  \"Booking ID: GUEST-...\"\n   â†“\n[Auto-redirect in 5s]\n  â†’ Homepage (/)\n   â†“\n[End] âœ… SUCCESS\n```\n\n---\n\n## 4. Guest Blocked Flow (Wallet)\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚           GUEST BLOCKED - WALLET PAYMENT FLOW               â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\n[Start] â†’ Not Logged In\n   â†“\n[Add Services]\n   â†“\n[Go to /booking]\n   â†“\n[Fill Customer Info]\n   â†“\n[Select Specialist]\n   â†“\n[Select Date & Time]\n   â†“\n[Choose Payment]\n  âšª DIGITAL WALLET â† SELECT THIS\n   â†“\n[Payment Method Check]\n  !isLoggedIn && paymentMethod !== 'cash'\n   â†“\n[Alert Box?] âœ… YES - BLUE ALERT SHOWS\n  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n  â”‚ ğŸ”’ Account Login Required           â”‚\n  â”‚                                     â”‚\n  â”‚ Digital Wallet requires login       â”‚\n  â”‚ Sign in to access payment options   â”‚\n  â”‚                                     â”‚\n  â”‚ [Sign In Now] [Create Account]      â”‚\n  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n   â†“\n[Confirm Button?] ğŸ”´ DISABLED\n   â†“\n[Can't Click Confirm]\n   â†“\n[User Options]\n  â€¢ Click \"Sign In Now\" â†’ /customer/login\n  â€¢ Click \"Create Account\" â†’ /customer/login\n  â€¢ Or change to \"Cash on Delivery\"\n   â†“\n[End] âŒ BOOKING BLOCKED (requires auth)\n```\n\n---\n\n## 5. Logged-in User Flow (Any Payment)\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚       LOGGED-IN USER - ANY PAYMENT FLOW                     â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\n[Start] â†’ Logged In âœ…\n   â†“\n[Add Services]\n   â†“\n[Go to /booking]\n   â†“\n[Customer Info]\n  â€¢ Name (auto-filled)\n  â€¢ Email (auto-filled)\n  â€¢ Phone (can update)\n   â†“\n[Select Specialist]\n  Per service (required)\n   â†“\n[Select Date & Time]\n  â€¢ Date (required)\n  â€¢ Time (required)\n   â†“\n[Choose Payment Method]\n  âšª Cash\n  âšª Digital Wallet\n  âšª Mixed (Wallet + Cash)\n   â†“\n[If Wallet/Mixed Selected]\n  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n  â”‚ â€¢ Show wallet balance        â”‚\n  â”‚ â€¢ Show loyalty points        â”‚\n  â”‚ â€¢ Allow adjustments          â”‚\n  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n   â†“\n[Apply Coupon (optional)]\n  WELCOME10, SAVE50, etc.\n   â†“\n[Calculate Payment]\n  finalAmount = cartTotal\n              - couponDiscount\n              - walletUsed\n              - pointsValue\n   â†“\n[Alert Box?] âŒ NO (logged in)\n   â†“\n[Confirm Button?] âœ… ENABLED\n   â†“\n[Click CONFIRM BOOKING]\n   â†“\n[Process Payment]\n  â€¢ Deduct from wallet (if used)\n  â€¢ Deduct from points (if used)\n  â€¢ Create booking in Zustand\n   â†“\n[Generate Booking ID]\n  bk_abc123def456\n   â†“\n[Calculate Final Amount]\n  finalAmount = sum - coupon - wallet - points\n   â†“\n[Save to Firebase]\n  {\n    bookingId: \"bk_...\",\n    customerId: \"user_123\",\n    paymentMethod: \"wallet\",\n    walletAmountUsed: 80,\n    pointsUsed: 500,\n    finalAmount: 100,\n    status: \"pending\"\n  }\n   â†“\n[Show Confirmation]\n  \"Booking confirmed!\"\n  \"Booking ID: bk_...\"\n  \"Deducted from wallet: $80\"\n   â†“\n[Auto-redirect in 5s]\n  â†’ /customer/portal/bookings\n   â†“\n[End] âœ… SUCCESS\n```\n\n---\n\n## 6. Button Enable/Disable Logic\n\n```\n                    CONFIRM BUTTON STATE\n                            â†“\n            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n            â”‚  Check All Conditions         â”‚\n            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                            â†“\n        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n        â†“           â†“           â†“          â†“\n    NAME?       EMAIL?      DATE?      TIME?\n        â”‚           â”‚           â”‚          â”‚\n        â”œâ”€ FILLED   â”œâ”€ FILLED   â”œâ”€ YES    â”œâ”€ YES\n        â”‚ âœ…        â”‚ âœ…        â”‚ âœ…      â”‚ âœ…\n        â”‚           â”‚           â”‚          â”‚\n        â””â”€ EMPTY    â””â”€ EMPTY    â””â”€ NO     â””â”€ NO\n          âŒ          âŒ          âŒ        âŒ\n            â†“\n        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n        â”‚  Specialist Assigned?         â”‚\n        â”‚  (For EACH service)           â”‚\n        â”œâ”€ ALL YES â†’ âœ… CONTINUE        â”‚\n        â””â”€ ANY NO  â†’ âŒ STOP            â”‚\n            â†“\n        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n        â”‚  Payment & Login Check        â”‚\n        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n            â†“\n        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n        â”‚  paymentMethod === 'cash'?    â”‚\n        â”œâ”€ YES â†’ âœ… ALLOW (no login)    â”‚\n        â””â”€ NO â†’ Check: isLoggedIn?     â”‚\n                â”œâ”€ YES â†’ âœ… ALLOW       â”‚\n                â””â”€ NO â†’ âŒ DENY         â”‚\n            â†“\n        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n        â”‚  FINAL RESULT                 â”‚\n        â”œâ”€ ALL âœ… â†’ BUTTON ENABLED ğŸŸ¢   â”‚\n        â””â”€ ANY âŒ â†’ BUTTON DISABLED ğŸ”´  â”‚\n        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n---\n\n## 7. Payment Calculation Example\n\n### Guest with Cash\n```\nCart Total:           $150\n  - Service 1:        $50\n  - Service 2:        $100\n\nCoupon Code:          WELCOME10 (-10%)\nCoupon Discount:      -$15 (150 * 0.10)\n\nWallet Used:          $0 (guest has no wallet)\nPoints Used:          $0 (guest has no points)\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nFINAL AMOUNT:         $135\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nPayment Method:       Cash on Delivery\nBooking ID:           GUEST-1704067200000-x7k9m2p\nStatus:               Pending\n```\n\n### Logged-in User with Mixed Payment\n```\nCart Total:           $150\n  - Service 1:        $50\n  - Service 2:        $100\n\nCoupon Code:          WELCOME10 (-10%)\nCoupon Discount:      -$15\n\nWallet Balance:       $100 (available)\nWallet Used:          -$80 (chosen amount)\n\nLoyalty Points:       1000 pts (available)\nPoints Used:          500 pts = -$50 (configured)\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nCalculation:\n$150 - $15 - $80 - $50 = $5\n\nFINAL AMOUNT:         $5 (remaining cash)\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nPayment Breakdown:\n  â€¢ From Wallet:      $80\n  â€¢ From Points:      $50\n  â€¢ Cash Payment:     $5\n  â€¢ Total:            $135 âœ…\n\nBooking ID:           bk_abc123def456\nStatus:               Pending\n```\n\n---\n\n## 8. State Management Flow\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚         ZUSTAND STORE + FIREBASE SYNC                   â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ useBookingStore (Client-side State)                     â”‚\nâ”‚                                                         â”‚\nâ”‚ â€¢ cartItems[]                                           â”‚\nâ”‚ â€¢ selectedDate                                          â”‚\nâ”‚ â€¢ selectedTime                                          â”‚\nâ”‚ â€¢ specialRequests                                       â”‚\nâ”‚ â€¢ addBooking(data) â†’ creates booking object            â”‚\nâ”‚ â€¢ clearCart()                                           â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n              â†“ handleConfirmBooking() â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Firebase (Server-side Persistence)                      â”‚\nâ”‚                                                         â”‚\nâ”‚ Collection: bookings                                    â”‚\nâ”‚ Document ID: auto-generated                            â”‚\nâ”‚ Fields: All booking data + timestamps                  â”‚\nâ”‚                                                         â”‚\nâ”‚ Guest Bookings:                                         â”‚\nâ”‚ â€¢ customerId: \"guest\"                                  â”‚\nâ”‚ â€¢ No wallet/points deductions                          â”‚\nâ”‚                                                         â”‚\nâ”‚ User Bookings:                                          â”‚\nâ”‚ â€¢ customerId: \"user_id\"                                â”‚\nâ”‚ â€¢ Wallet/points deductions saved                       â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n              â†“ After Save â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Redirect & Cleanup                                      â”‚\nâ”‚                                                         â”‚\nâ”‚ Guest:                                                  â”‚\nâ”‚ â€¢ Show confirmation                                     â”‚\nâ”‚ â€¢ clearCart()                                           â”‚\nâ”‚ â€¢ Redirect to /  (in 5 seconds)                        â”‚\nâ”‚                                                         â”‚\nâ”‚ User:                                                   â”‚\nâ”‚ â€¢ Show confirmation                                     â”‚\nâ”‚ â€¢ clearCart()                                           â”‚\nâ”‚ â€¢ Redirect to /customer/portal/bookings                â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n---\n\n## Summary: Quick Reference\n\n| User Type | Payment | Login Needed? | Alert Shows? | Button | Booking ID |\n|-----------|---------|---|---|---|---|\n| Guest | Cash | âŒ NO | âŒ NO | ğŸŸ¢ YES | GUEST-{ts}-{rand} |\n| Guest | Wallet | âœ… YES | âœ… BLUE | ğŸ”´ NO | N/A (blocked) |\n| Guest | Mixed | âœ… YES | âœ… BLUE | ğŸ”´ NO | N/A (blocked) |\n| User | Cash | âœ… (already in) | âŒ NO | ğŸŸ¢ YES | bk_{uuid} |\n| User | Wallet | âœ… (already in) | âŒ NO | ğŸŸ¢ YES | bk_{uuid} |\n| User | Mixed | âœ… (already in) | âŒ NO | ğŸŸ¢ YES | bk_{uuid} |\n"